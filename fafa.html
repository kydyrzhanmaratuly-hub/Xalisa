<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</title>
    <link rel="stylesheet" href="fafa.css">
    
</head>
<body>
    <div class="language-selector">
    <button onclick="setLanguage('KZ')">KZ</button>
    <button class="active" onclick="setLanguage('RU')">RU</button>
    <button onclick="setLanguage('EN')">EN</button>
    </div>

    <div class="container">
        <div class="left-side">
    <a href="https://kini.kz/en" target="_blank" rel="noopener noreferrer">
        <img src="Kini German.png" alt="Logo" class="logo">
    </a>
    <p class="welcome-text" id="welcome-text-id">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</p>
    <p class="description-text" id="description-text-id">–í–∞—à –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</p>
</div>

        <div class="right-side">
    <div class="login-form">
        <h1 id="header-title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
        <form id="loginForm">
            
            <label for="login" id="label-login">–õ–æ–≥–∏–Ω</label>
            <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" id="login" data-placeholder-ru="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω" data-placeholder-kz="–õ–æ–≥–∏–Ω–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑" data-placeholder-en="Enter login">
            
            <label for="password" id="label-password">–ü–∞—Ä–æ–ª—å</label>
            <input type="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" id="password" data-placeholder-ru="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" data-placeholder-kz="“ö“±–ø–∏—è —Å”©–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑" data-placeholder-en="Enter password">
            
            <a href="#" class="forgot-password" id="forgot-link">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
            <button type="submit" class="login-btn" id="login-button">–í–æ–π—Ç–∏</button>
            <p class="error-message" id="errorMessage"></p>
            
            <p class="register-text" id="register-prompt">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="Registration.html" class="register-link" id="register-link-text">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            </p>

            <!-- –ù–û–í–´–ô –ë–õ–û–ö –î–õ–Ø –£–ß–ò–¢–ï–õ–ï–ô -->
            <div class="teacher-section">
                <p id="teacher-question">üë®‚Äçüè´ –í—ã —É—á–∏—Ç–µ–ª—å?</p>
                <a href="teacher_login.html" class="teacher-link" id="teacher-link-text">–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—Ö–æ–¥—É –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π</a>
            </div>
            
        </form>
    </div>
</div>
    </div>

<script>
    const translations = {
        'RU': {
            'header-title': '–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É',
            'welcome-text-id': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!',
            'description-text-id': '–í–∞—à –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è',
            'label-login': '–õ–æ–≥–∏–Ω',
            'label-password': '–ü–∞—Ä–æ–ª—å',
            'forgot-link': '–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?',
            'login-button': '–í–æ–π—Ç–∏',
            'register-prompt_prefix': '–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?',
            'register-link-text': '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
            'teacher-question': 'üë®‚Äçüè´ –í—ã —É—á–∏—Ç–µ–ª—å?',
            'teacher-link-text': '–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—Ö–æ–¥—É –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π',
            'error-empty': '–°–ø–µ—Ä–≤–∞ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å',
            'error-conn': '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.',
            'auth-success': '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ',
        },
        'KZ': {
            'header-title': '–ñ“Ø–π–µ–≥–µ –∫—ñ—Ä—É',
            'welcome-text-id': '“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!',
            'description-text-id': '–ó–∞–º–∞–Ω–∞—É–∏ –±—ñ–ª—ñ–º –±–µ—Ä—É–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω –±—ñ–ª—ñ–º –±–µ—Ä—É –ø–æ—Ä—Ç–∞–ª—ã“£—ã–∑',
            'label-login': '–õ–æ–≥–∏–Ω',
            'label-password': '“ö“±–ø–∏—è —Å”©–∑',
            'forgot-link': '“ö“±–ø–∏—è —Å”©–∑–¥—ñ “±–º—ã—Ç—Ç—ã“£—ã–∑ –±–∞?',
            'login-button': '–ö—ñ—Ä—É',
            'register-prompt_prefix': '–ê–∫–∫–∞—É–Ω—Ç –∂–æ“õ –ø–∞?',
            'register-link-text': '–¢—ñ—Ä–∫–µ–ª—É',
            'teacher-question': 'üë®‚Äçüè´ –°—ñ–∑ “±—Å—Ç–∞–∑—Å—ã–∑ –±–∞?',
            'teacher-link-text': '“∞—Å—Ç–∞–∑–¥–∞—Ä “Ø—à—ñ–Ω –∫—ñ—Ä—É —ñ—à—ñ–Ω–µ ”©—Ç—ñ“£—ñ–∑',
            'error-empty': '–ê–ª–¥—ã–º–µ–Ω –ª–æ–≥–∏–Ω –º–µ–Ω “õ“±–ø–∏—è —Å”©–∑—ñ“£—ñ–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑',
            'error-conn': '–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É “õ–∞—Ç–µ—Å—ñ. –°–µ—Ä–≤–µ—Ä–¥—ñ“£ —ñ—Å–∫–µ “õ–æ—Å—ã–ª“ì–∞–Ω—ã–Ω–∞ –∫”©–∑ –∂–µ—Ç–∫—ñ–∑—ñ“£—ñ–∑.',
            'auth-success': '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å”ô—Ç—Ç—ñ ”©—Ç—Ç—ñ',
        },
        'EN': {
            'header-title': 'System Login',
            'welcome-text-id': 'Welcome!',
            'description-text-id': 'Your educational portal for modern learning',
            'label-login': 'Login',
            'label-password': 'Password',
            'forgot-link': 'Forgot password?',
            'login-button': 'Login',
            'register-prompt_prefix': 'No account?',
            'register-link-text': 'Registration',
            'teacher-question': 'üë®‚Äçüè´ Are you a teacher?',
            'teacher-link-text': 'Go to teacher login',
            'error-empty': 'First enter your login and password',
            'error-conn': 'Server connection error. Ensure the server is running.',
            'auth-success': 'Authorization successful',
        }
    };

    let currentLang = localStorage.getItem('currentLanguage') || 'RU';

    /**
     * –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
     */
    function setLanguage(lang) {
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
        document.querySelectorAll('.language-selector button').forEach(btn => {
            btn.classList.remove('active');
            if (btn.textContent === lang) {
                btn.classList.add('active');
            }
        });

        currentLang = lang;
        const t = translations[lang];

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤ (–ø–æ ID)
        document.getElementById('header-title').textContent = t['header-title'];
        document.getElementById('welcome-text-id').textContent = t['welcome-text-id'];
        document.getElementById('description-text-id').textContent = t['description-text-id'];
        document.getElementById('label-login').textContent = t['label-login'];
        document.getElementById('label-password').textContent = t['label-password'];
        document.getElementById('forgot-link').textContent = t['forgot-link'];
        document.getElementById('login-button').textContent = t['login-button'];
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Å—ã–ª–∫–æ–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —è–∑—ã–∫–∞ –≤ href
        document.getElementById('register-prompt').innerHTML = `${t['register-prompt_prefix']} <a href="Registration.html?lang=${lang}" class="register-link" id="register-link-text">${t['register-link-text']}</a>`;
        try {
            document.getElementById('register-link-text').href = `Registration.html?lang=${lang}`;
        } catch (e) { /* ignore if not anchor */ }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ —É—á–∏—Ç–µ–ª–µ–π
        document.getElementById('teacher-question').textContent = t['teacher-question'];
        const teacherLink = document.getElementById('teacher-link-text');
        teacherLink.textContent = t['teacher-link-text'];
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä —è–∑—ã–∫–∞ –≤ —Å—Å—ã–ª–∫—É –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞
        try {
            teacherLink.href = `teacher_login.html?lang=${lang}`;
        } catch (e) { /* if element not anchor or missing, ignore */ }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ placeholder'–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É—è data-–∞—Ç—Ä–∏–±—É—Ç—ã)
        const langCode = lang.toLowerCase();
        document.getElementById('login').placeholder = document.getElementById('login').getAttribute(`data-placeholder-${langCode}`);
        document.getElementById('password').placeholder = document.getElementById('password').getAttribute(`data-placeholder-${langCode}`);

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
        localStorage.setItem('currentLanguage', lang);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∑—ã–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', () => {
        setLanguage(currentLang);
    });
    
    // =========================================================
    // –õ–û–ì–ò–ö–ê –í–•–û–î–ê
    // =========================================================
    document.getElementById("loginForm").addEventListener("submit", async function(event) {
        event.preventDefault();

        const login = document.getElementById("login").value.trim();
        const password = document.getElementById("password").value.trim();
        const errorMessage = document.getElementById("errorMessage");
        const t = translations[currentLang]; // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞

        // 1. –°–±—Ä–æ—Å —Å–æ–æ–±—â–µ–Ω–∏–π
        errorMessage.textContent = ""; 
        errorMessage.style.fontSize = "0.9em";
        errorMessage.style.color = "red"; 

        if (!login || !password) {
            errorMessage.textContent = t['error-empty']; // –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            return;
        }

        // --- –ò–ú–ò–¢–ê–¶–ò–Ø –£–°–ü–ï–®–ù–û–ô –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò –î–õ–Ø –¢–ï–°–¢–û–í–´–• –ê–ö–ö–ê–£–ù–¢–û–í ---
        if ((login === "Yerkebulan" && password === "12345") || (login === "Kydyrzhan" && password === "330387")) {
            // –£–°–ü–ï–®–ù–´–ô –í–•–û–î
            errorMessage.style.color = "green";
            errorMessage.textContent = t['auth-success']; // –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–±–æ–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤)
            const userLogin = login === 'Yerkebulan' ? 'Yerkebulan' : 'Kydyrzhan';
            const userName = login === 'Yerkebulan' ? '–ï—Ä–∫–µ–±—É–ª–∞–Ω' : 'Kydyrzhan';
            localStorage.setItem('userData', JSON.stringify({
                login: userLogin,
                name: userName,
                group: "–ò–°-204", 
                course: 2
            }));
            
            // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ static.html —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            setTimeout(() => {
                window.location.href = "static.html"; 
            }, 1000); 
            return;
        }
        // ---------------------------------------------------------------
        
        // 3. –ó–∞–ø—Ä–æ—Å –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
        try {
            const response = await fetch("http://localhost:3000/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ login, password })
            });

            if (response.ok) {
                const result = await response.json(); 
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–∫–ª—é—á–∞—è –≥—Ä—É–ø–ø—É
                localStorage.setItem('userData', JSON.stringify(result.user));
                
                // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª —É—Å–ø–µ—Ö 
                errorMessage.style.color = "green";
                errorMessage.textContent = t['auth-success']; // –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                setTimeout(() => {
                    window.location.href = "static.html"; 
                }, 1000);
            } else {
                // –°–æ–æ–±—â–µ–Ω–∏–µ: "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å" (–æ—Ç —Å–µ—Ä–≤–µ—Ä–∞)
                const result = await response.json();
                errorMessage.textContent = result.message || "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å";
            }
        } catch (error) {
            // –û—à–∏–±–∫–∞, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
            errorMessage.textContent = t['error-conn']; // –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            console.error("Fetch error:", error);
        }
    });
</script>
</body>
</html>